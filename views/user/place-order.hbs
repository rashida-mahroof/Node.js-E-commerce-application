<section>
    <div class="container">
        <form  action="" id="checkout-form" >
        <div class="row">
                <div class="col-md-6">
                                <h2>Enter delivery details</h2>
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Name</label>
                        <input type="text" class="form-control" id="name" name="name">
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Address</label>
                        <textarea class="form-control" id="address" name="address" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Pin code</label>
                        <input type="text" class="form-control" id="pin" name="pin">
                    </div>
                    <div class="form-group">
                        <label for="exampleFormControlInput1">Mobile</label>
                        <input type="text" class="form-control" id="mobile" name="mobile">
                        <input type="text" name="userId" id="" value="{{user._id}}" hidden>
                    </div>
                    
        </div>
        <div class="col-md-6">
                        <div class=" pl-3 pt-3 mt-4 card" style="width: 25rem;">
                        <div class="card-body">
                            <h5 class="card-title">Total Amount: {{total}}/-</h5>
                            <h6 class="card-text mt-4">Payment Method</h6>
                            <input type="radio" name="payment-method" value="cod" checked >Cash on Delivery <br>
                            <input type="radio" name="payment-method" value="online">Online Payment <br>
                            <button type="submit" class=" mt-3 btn btn-primary float-right">Checkout</button> 
                        </div>
                        </div>
        </div>
    </form>
    </div>
    </div>
</section>

<script>
    $("#checkout-form").submit((e)=>{
        e.preventDefault()
        
        $.ajax({
            url:'/place-order',
            method:'post',
            data:$('#checkout-form').serialize(),          //serialize method is used to get all datas of the form
            success:(response)=>{
                //alert("Order Placed")
                if(response.status){
                    location.href = '/order-success'
                }

            }
        })
    })
</script>